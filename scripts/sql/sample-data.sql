-- Datos de ejemplo para `repositorio_fct`
-- Ejecuta tras crear el esquema: mysql -u <user> -p repositorio_fct < scripts/sql/sample-data.sql

USE `repositorio_fct`;

-- Catálogo de ciclos formativos
INSERT INTO ciclos_formativos (id, descripcion) VALUES
  (1, 'Desarrollo de Aplicaciones Web'),
  (2, 'Desarrollo de Aplicaciones Multiplataforma'),
  (3, 'Sistemas Microinformáticos y Redes'),
  (4, 'Administración de Sistemas Informáticos en Red')
ON DUPLICATE KEY UPDATE descripcion = VALUES(descripcion);

-- Usuarios (contraseña: password123)
INSERT INTO users (id, name, email, password_hash, rol, ciclo_id)
VALUES
  (1, 'Admin', 'admin@example.com', '$2a$10$29bfnO6Qy4HshhPwlas8XeZ6OVtWv.aZhlm.JEssKh7UVC80Bjc4G', 'admin', 1),
  (2, 'Ana Alumna', 'ana@example.com', '$2a$10$29bfnO6Qy4HshhPwlas8XeZ6OVtWv.aZhlm.JEssKh7UVC80Bjc4G', 'user', 1),
  (3, 'Bruno Estudiante', 'bruno@example.com', '$2a$10$29bfnO6Qy4HshhPwlas8XeZ6OVtWv.aZhlm.JEssKh7UVC80Bjc4G', 'user', 2),
  (4, 'Claudia Dev', 'claudia@example.com', '$2a$10$29bfnO6Qy4HshhPwlas8XeZ6OVtWv.aZhlm.JEssKh7UVC80Bjc4G', 'user', 3),
  (5, 'Diego Tester', 'diego@example.com', '$2a$10$29bfnO6Qy4HshhPwlas8XeZ6OVtWv.aZhlm.JEssKh7UVC80Bjc4G', 'user', 4)
ON DUPLICATE KEY UPDATE email = VALUES(email);

-- Proyectos de ejemplo
INSERT INTO proyectos
  (id, user_id, title, descripcion, resumen, ciclo_id, curso_academico, tags, alumnos, status, video_url, pdf_urls, created_at, updated_at, submitted_at, published_at)
VALUES
  (1, 2,
    'Gestor de Inventario Web',
    'Aplicación web para gestionar inventario escolar con alertas de stock y exportación.',
    'Inventario online con control de stock y reportes.',
    1,
    '2024/25',
    'angular, node, mysql',
    'Ana Alumna, Carlos Teammate',
    'PUBLISHED',
    'http://localhost:3000/uploads/demo-inventario.mp4',
    JSON_ARRAY('http://localhost:3000/uploads/inventario-doc.pdf'),
    NOW(), NOW(), NOW(), NOW()
  ),
  (2, 3,
    'App de Citas Médicas',
    'Plataforma para reservar citas y recordar turnos mediante correo/SMS.',
    'Reserva de citas y recordatorios automáticos.',
    2,
    '2024/25',
    'flutter, api, salud',
    'Bruno Estudiante',
    'SUBMITTED',
    NULL,
    JSON_ARRAY(),
    NOW(), NOW(), NOW(), NULL
  ),
  (3, 2,
    'Sistema de Gestión de Biblioteca',
    'Backend para préstamo de libros con autenticación y panel admin.',
    'Gestión de biblioteca con roles y métricas.',
    4,
    '2023/24',
    'express, rest, biblioteca',
    'Ana Alumna',
    'DRAFT',
    NULL,
    NULL,
    NOW(), NOW(), NULL, NULL
  ),
  (4, 3,
    'Plataforma de Mentorías',
    'Portal para emparejar estudiantes con mentores, chat y agenda.',
    'Mentorías con matching automático y calendario.',
    1,
    '2024/25',
    'react, node, mentoring',
    'Bruno Estudiante, Ana Alumna',
    'SUBMITTED',
    NULL,
    JSON_ARRAY('http://localhost:3000/uploads/mentorias.pdf'),
    NOW(), NOW(), NOW(), NULL
  ),
  (5, 4,
    'Dashboard Energético IoT',
    'Visualización de consumo eléctrico en tiempo real usando MQTT.',
    'Panel IoT con alertas y exportación CSV.',
    3,
    '2024/25',
    'iot, mqtt, charts',
    'Claudia Dev',
    'PUBLISHED',
    'http://localhost:3000/uploads/iot-demo.mp4',
    JSON_ARRAY('http://localhost:3000/uploads/iot-memoria.pdf'),
    NOW(), NOW(), NOW(), NOW()
  ),
  (6, 5,
    'Gestor de Incidencias Escolar',
    'API para registrar incidencias en aulas con flujo de estados.',
    'Issue tracker simple para centros educativos.',
    2,
    '2023/24',
    'nestjs, postgres, incidencias',
    'Diego Tester',
    'DRAFT',
    NULL,
    JSON_ARRAY(),
    NOW(), NOW(), NULL, NULL
  ),
  (7, 2,
    'Reservas de Laboratorio',
    'Sistema de reservas de laboratorios con control de aforo y horarios.',
    'Reservas, calendarios y recordatorios.',
    4,
    '2024/25',
    'vue, express, reservas',
    'Ana Alumna',
    'PUBLISHED',
    NULL,
    JSON_ARRAY('http://localhost:3000/uploads/labs.pdf'),
    NOW(), NOW(), NOW(), NOW()
  ),
  (8, 3,
    'App de Hábitos Saludables',
    'Seguimiento de hábitos con notificaciones push y retos semanales.',
    'Hábitos, gamificación y ranking.',
    2,
    '2024/25',
    'flutter, firebase, health',
    'Bruno Estudiante',
    'SUBMITTED',
    'http://localhost:3000/uploads/habitos.mp4',
    JSON_ARRAY('http://localhost:3000/uploads/habitos.pdf'),
    NOW(), NOW(), NOW(), NULL
  ),
  (9, 4,
    'Analítica de Tráfico Web',
    'Recolector de métricas web con panel en tiempo real.',
    'Analítica ligera sin cookies.',
    1,
    '2023/24',
    'node, websockets, analytics',
    'Claudia Dev',
    'DRAFT',
    NULL,
    NULL,
    NOW(), NOW(), NULL, NULL
  ),
  (10, 5,
    'Repositorio de Recursos Docentes',
    'Portal para compartir guías, vídeos y ejercicios entre docentes.',
    'Repositorio colaborativo con búsqueda full-text.',
    4,
    '2024/25',
    'nextjs, mysql, sharing',
    'Diego Tester, Ana Alumna',
    'PUBLISHED',
    'http://localhost:3000/uploads/recursos.mp4',
    JSON_ARRAY('http://localhost:3000/uploads/recursos.pdf'),
    NOW(), NOW(), NOW(), NOW()
  ),
  (11, 2,
    'Planificador de Rutas Sostenibles',
    'Cálculo de rutas a pie/bici priorizando zonas verdes.',
    'Rutas ecológicas con mapa interactivo.',
    1,
    '2024/25',
    'leaflet, node, sustainability',
    'Ana Alumna',
    'SUBMITTED',
    NULL,
    JSON_ARRAY('http://localhost:3000/uploads/rutas.pdf'),
    NOW(), NOW(), NOW(), NULL
  ),
  (12, 3,
    'Gestor de Turnos para Taller',
    'Aplicación para organizar turnos de taller con control de materiales.',
    'Turnos, inventario y reportes.',
    3,
    '2023/24',
    'svelte, api, talleres',
    'Bruno Estudiante, Diego Tester',
    'DRAFT',
    NULL,
    JSON_ARRAY(),
    NOW(), NOW(), NULL, NULL
  )
ON DUPLICATE KEY UPDATE title = VALUES(title);
